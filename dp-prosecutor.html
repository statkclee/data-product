<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <title>Software Carpentry: 참여연대 검찰보고서</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="css/swc.css" />
    <link rel="alternate" type="application/rss+xml" title="Software Carpentry Blog" href="http://software-carpentry.org/feed.xml"/>
    <meta charset="UTF-8" />
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    
      ga('create', 'UA-59802572-17', 'auto');
      ga('send', 'pageview');
    
    </script>
  </head>
  <body class="lesson">
    <div class="container card">
      <div class="banner">
        <a href="http://software-carpentry.org" title="Software Carpentry">
          <img alt="Software Carpentry banner" src="img/software-carpentry-banner.png" />
        </a>
      </div>
      <article>
      <div class="row">
        <div class="col-md-10 col-md-offset-1">
                    <a href="index.html"><h1 class="title">참여연대 검찰보고서</h1></a>
          <h2 class="subtitle">그 사건 그 검사 DB</h2>
          <h1 id="case-data">그 사건 그 검사 DB</h1>
<p><a href="http://www.peoplepower21.org/">참여연대</a> 웹사이트에 <a href="http://www.peoplepower21.org/CaseDB">그 사건 그 검사 DB</a>를 통해 검찰이 수사한 주요 사건, 사건별 담당 검사와 지휘부, 사건의 개요와 수사 결과, 검찰 기소 사건의 재판 결과를 파악할 수 있다.</p>
<h1 id="case-data-bb">게시판 - 검찰 진행상황</h1>
<h2 id="case-data-bb-crawl">데이터 가져오기</h2>
<p>게시판 번호, 사건명, 검찰처분연도, 진행상태를 데이터프레임으로 우선 정리한다.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a><span class="kw">library</span>(rvest)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a>pp_link_list &lt;-<span class="st"> </span><span class="kw">list</span>()</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a>bb_list &lt;-<span class="st"> </span><span class="kw">list</span>()</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true"></a><span class="kw">Sys.setlocale</span>(<span class="st">&quot;LC_ALL&quot;</span>, <span class="st">&quot;C&quot;</span>)</span></code></pre></div>
<pre><code>[1] &quot;C&quot;</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a>pp_url &lt;-<span class="st"> &quot;http://www.peoplepower21.org/index.php&quot;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">11</span>){</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true"></a>  <span class="co"># 게시판 페이지 1 .. 11</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true"></a>  pp_link_list[[i]] &lt;-<span class="st"> </span><span class="kw">paste0</span>(pp_url, <span class="st">&quot;?mid=CaseDB&amp;page=&quot;</span>, i)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true"></a>  </span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true"></a>  <span class="co"># 각페이지별 document_srl 추출</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true"></a>  bb_list[[i]] &lt;-<span class="st"> </span>pp_link_list[[i]] <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true"></a><span class="st">    </span><span class="kw">read_html</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true"></a><span class="st">    </span><span class="kw">html_nodes</span>(<span class="dt">xpath=</span><span class="st">&#39;//*[@id=&quot;board_list&quot;]/table&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true"></a><span class="st">    </span><span class="kw">html_table</span>()</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true"></a>}</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true"></a></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true"></a><span class="kw">Sys.setlocale</span>(<span class="st">&quot;LC_ALL&quot;</span>, <span class="st">&quot;Korean&quot;</span>)</span></code></pre></div>
<pre><code>[1] &quot;LC_COLLATE=Korean_Korea.949;LC_CTYPE=Korean_Korea.949;LC_MONETARY=Korean_Korea.949;LC_NUMERIC=C;LC_TIME=Korean_Korea.949&quot;</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a>bb_df &lt;-<span class="st"> </span><span class="kw">map_df</span>(bb_list, enframe) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true"></a><span class="st">  </span><span class="kw">unnest</span>(value) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>name)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true"></a>DT<span class="op">::</span><span class="kw">datatable</span>(bb_df) </span></code></pre></div>
<p><img src="figure/data-crawling-url-1.png" title="plot of chunk data-crawling-url" alt="plot of chunk data-crawling-url" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a>bb_df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">write_rds</span>(<span class="st">&quot;data/bb_df.rds&quot;</span>)</span></code></pre></div>
<h2 id="case-data-EDA-overview">연도별 검찰처분 현황</h2>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true"></a>bb_df <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true"></a><span class="st">  </span><span class="kw">count</span>(<span class="st">`</span><span class="dt">검찰 처분 연도</span><span class="st">`</span>, <span class="st">`</span><span class="dt">진행상태</span><span class="st">`</span>, <span class="dt">sort=</span><span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">spread</span>(<span class="st">`</span><span class="dt">진행상태</span><span class="st">`</span>, n, <span class="dt">fill=</span><span class="dv">0</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="st">`</span><span class="dt">합계</span><span class="st">`</span> =<span class="st"> `</span><span class="dt">수사중</span><span class="st">`</span> <span class="op">+</span><span class="st"> `</span><span class="dt">재판중</span><span class="st">`</span> <span class="op">+</span><span class="st"> `</span><span class="dt">종결</span><span class="st">`</span>)</span></code></pre></div>
<pre><code>Error: Must group by variables found in `.data`.
* Column `검찰 처분 연도` is not found.
* Column `진행상태` is not found.</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true"></a><span class="kw">library</span>(extrafont)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true"></a><span class="kw">loadfonts</span>()</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true"></a>bb_df <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true"></a><span class="st">  </span><span class="kw">count</span>(<span class="st">`</span><span class="dt">검찰 처분 연도</span><span class="st">`</span>, <span class="st">`</span><span class="dt">진행상태</span><span class="st">`</span>, <span class="dt">sort=</span><span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="st">`</span><span class="dt">진행상태</span><span class="st">`</span> =<span class="st"> </span><span class="kw">factor</span>(<span class="st">`</span><span class="dt">진행상태</span><span class="st">`</span>, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;재판중&quot;</span>, <span class="st">&quot;수사중&quot;</span>, <span class="st">&quot;종결&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span><span class="st">`</span><span class="dt">검찰 처분 연도</span><span class="st">`</span>, <span class="dt">y=</span>n, <span class="dt">color=</span><span class="st">`</span><span class="dt">진행상태</span><span class="st">`</span>)) <span class="op">+</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true"></a><span class="st">    </span><span class="kw">geom_line</span>() <span class="op">+</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true"></a><span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme_minimal</span>(<span class="dt">base_family =</span> <span class="st">&quot;NanumGothic&quot;</span>) <span class="op">+</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;&quot;</span>, <span class="dt">y=</span><span class="st">&quot;사건수&quot;</span>, </span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true"></a>         <span class="dt">title=</span><span class="st">&quot;검찰처분연도별 사건현황 추이&quot;</span>,</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true"></a>         <span class="dt">caption=</span><span class="st">&quot;출처: 참여연대 그 사건 그 검사 DB&quot;</span>)</span></code></pre></div>
<pre><code>Error: Must group by variables found in `.data`.
* Column `검찰 처분 연도` is not found.
* Column `진행상태` is not found.</code></pre>
<h1 id="case-data-link">사건 상세</h1>
<h2 id="case-data-link-master">사건 상세 크롤링 대상작업</h2>
<p>가장 먼저 크롤링을 위한 링크를 받아 티블에 저장한다. 그리고 검찰처분연도와 진행상태를 사건바로가기와 연결하여 상세히 살펴볼 수 있도록 작업한다. 이를 위해서 먼저 크롤링 대상 추출작업을 선행한다.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true"></a>pp_link_list &lt;-<span class="st"> </span><span class="kw">list</span>()</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true"></a>clean_link_list &lt;-<span class="st"> </span><span class="kw">list</span>()</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true"></a><span class="kw">Sys.setlocale</span>(<span class="st">&quot;LC_ALL&quot;</span>, <span class="st">&quot;C&quot;</span>)</span></code></pre></div>
<pre><code>[1] &quot;C&quot;</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true"></a>pp_url &lt;-<span class="st"> &quot;http://www.peoplepower21.org/index.php&quot;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">11</span>){</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true"></a>  <span class="co"># 게시판 페이지 1 .. 11</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true"></a>  pp_link_list[[i]] &lt;-<span class="st"> </span><span class="kw">paste0</span>(pp_url, <span class="st">&quot;?mid=CaseDB&amp;page=&quot;</span>, i)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true"></a>  </span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true"></a>  <span class="co"># 각페이지별 document_srl 추출</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true"></a>  clean_link_list[[i]] &lt;-<span class="st"> </span>pp_link_list[[i]] <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true"></a><span class="st">    </span><span class="kw">read_html</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true"></a><span class="st">    </span><span class="kw">html_nodes</span>(<span class="dt">xpath=</span><span class="st">&#39;//*[@id=&quot;board_list&quot;]/table&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true"></a><span class="st">    </span><span class="kw">html_nodes</span>(<span class="st">&quot;a&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true"></a><span class="st">    </span><span class="kw">html_attr</span>(<span class="st">&quot;href&quot;</span>)</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true"></a>}</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true"></a></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true"></a><span class="kw">Sys.setlocale</span>(<span class="st">&quot;LC_ALL&quot;</span>, <span class="st">&quot;Korean&quot;</span>)</span></code></pre></div>
<pre><code>[1] &quot;LC_COLLATE=Korean_Korea.949;LC_CTYPE=Korean_Korea.949;LC_MONETARY=Korean_Korea.949;LC_NUMERIC=C;LC_TIME=Korean_Korea.949&quot;</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true"></a><span class="co"># 크롤링을 위한 링크 제작</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true"></a>crawling_dat &lt;-<span class="st"> </span><span class="kw">tibble</span>(</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true"></a>  <span class="dt">url =</span> <span class="st">&quot;http://www.peoplepower21.org&quot;</span>,</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true"></a>  <span class="dt">link =</span> <span class="kw">flatten</span>(clean_link_list) <span class="op">%&gt;%</span><span class="st"> </span>unlist</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true"></a>)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true"></a></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true"></a>crawling_df &lt;-<span class="st"> </span>crawling_dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">str_detect</span>(link, <span class="st">&quot;sort_index|comment&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">crawling_url =</span> <span class="kw">str_c</span>(url, link))</span></code></pre></div>
<pre><code>Error: Problem with `filter()` input `..1`.
i Input `..1` is `!str_detect(link, &quot;sort_index|comment&quot;)`.
x object &#39;link&#39; not found</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true"></a>crawling_df &lt;-<span class="st"> </span><span class="kw">bind_cols</span>(bb_df, crawling_df)</span></code></pre></div>
<pre><code>Error in list2(...): object &#39;crawling_df&#39; not found</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true"></a>crawling_df <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>url, <span class="op">-</span>link) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">crawling_url =</span> <span class="kw">paste0</span>(<span class="st">&quot;&lt;a href=&quot;</span>, crawling_url,<span class="st">&quot;&gt;&quot;</span>, crawling_url,<span class="st">&quot;&lt;/a&gt;&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true"></a><span class="st">  </span><span class="kw">rename</span>(<span class="st">`</span><span class="dt">바로가기</span><span class="st">`</span> =<span class="st"> </span>crawling_url) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true"></a><span class="st">  </span>DT<span class="op">::</span><span class="kw">datatable</span>(<span class="dt">escape=</span><span class="ot">FALSE</span>, <span class="dt">options =</span> <span class="kw">list</span>(<span class="dt">scrollX=</span><span class="ot">TRUE</span>, <span class="dt">autoWidth =</span> <span class="ot">TRUE</span>,</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true"></a>                                         <span class="dt">columnDefs =</span> <span class="kw">list</span>(<span class="kw">list</span>(<span class="dt">width =</span> <span class="st">&#39;300px&#39;</span>, <span class="dt">targets =</span> <span class="kw">c</span>(<span class="dv">3</span>)))))</span></code></pre></div>
<pre><code>Error in select(., -url, -link): object &#39;crawling_df&#39; not found</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true"></a>crawling_df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">write_rds</span>(<span class="st">&quot;data/crawling_df.rds&quot;</span>)</span></code></pre></div>
<pre><code>Error in saveRDS(x, con, version = version): object &#39;crawling_df&#39; not found</code></pre>
<h2 id="case-data-link-master-execute">사건 상세 크롤링</h2>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true"></a>case_list &lt;-<span class="st"> </span><span class="kw">list</span>()</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(crawling_df)) {</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true"></a>  </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true"></a>  <span class="kw">Sys.setlocale</span>(<span class="st">&quot;LC_ALL&quot;</span>, <span class="st">&quot;C&quot;</span>)</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true"></a></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true"></a>  <span class="kw">cat</span>(i, <span class="st">&quot; :&quot;</span>, crawling_df<span class="op">$</span>crawling_url[i], <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true"></a>  </span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true"></a>  case_list[[i]] &lt;-<span class="st"> </span>crawling_df<span class="op">$</span>crawling_url[i] <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true"></a><span class="st">    </span><span class="kw">read_html</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true"></a><span class="st">    </span><span class="kw">html_nodes</span>(<span class="dt">xpath=</span><span class="st">&#39;//*[@id=&quot;content&quot;]/div/div/div[1]/div[2]/table&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true"></a><span class="st">    </span><span class="kw">html_table</span>(<span class="dt">fill =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true"></a><span class="st">    </span>.[[<span class="dv">1</span>]]</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true"></a></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true"></a>  <span class="kw">Sys.setlocale</span>(<span class="st">&quot;LC_ALL&quot;</span>, <span class="st">&quot;Korean&quot;</span>)</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true"></a></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true"></a>}</span></code></pre></div>
<pre><code>Error in nrow(crawling_df): object &#39;crawling_df&#39; not found</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true"></a>case_list <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">write_rds</span>(<span class="st">&quot;data/case_list.rds&quot;</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true"></a><span class="co"># case_detail_list &lt;- list()</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true"></a><span class="co"># </span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true"></a><span class="co"># for(i in 1:nrow(crawling_df)) {</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true"></a><span class="co">#   cat(i, &quot;:\n&quot;)</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true"></a><span class="co">#   </span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true"></a><span class="co">#   if(i == 86 | i==139 | i==143 |i==144 |i==152 | i==204) {</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true"></a><span class="co">#     # 86 - 세월호 건너뛰기</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true"></a><span class="co">#   } else {</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true"></a><span class="co">#     case_detail_list[i] &lt;- case_list[[i]] %&gt;% </span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true"></a><span class="co">#     spread(X1, X2) %&gt;% </span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true"></a><span class="co">#       set_names(paste0(&quot;X&quot;, 1:8)) %&gt;% </span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true"></a><span class="co">#       select(-X5) %&gt;% </span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true"></a><span class="co">#       set_names(c(&quot;수사 경과 및 결과&quot;, &quot;검찰 처분 연도&quot;, &quot;비고&quot;, &quot;사건개요&quot;, &quot;수사 담당 검사 및 지휘라인&quot;, &quot;약평&quot;, &quot;재판 경과 및 결과&quot;))</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true"></a><span class="co">#   }</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true"></a><span class="co"># }</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true"></a><span class="co"># </span></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true"></a><span class="co"># case_list[[2]] %&gt;% </span></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true"></a><span class="co">#     spread(X1, X2) %&gt;% </span></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true"></a><span class="co">#       set_names(paste0(&quot;X&quot;, 1:8)) %&gt;% </span></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true"></a><span class="co">#       select(-X5) %&gt;% </span></span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true"></a><span class="co">#       set_names(c(&quot;수사 경과 및 결과&quot;, &quot;검찰 처분 연도&quot;, &quot;비고&quot;, &quot;사건개요&quot;, &quot;수사 담당 검사 및 지휘라인&quot;, &quot;약평&quot;, &quot;재판 경과 및 결과&quot;))</span></span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true"></a><span class="co"># </span></span></code></pre></div>
        </div>
      </div>
      </article>
      <div class="footer">
        <a class="label swc-blue-bg" href="http://software-carpentry.org">Software Carpentry</a>
        <a class="label swc-blue-bg" href="https://github.com/swcarpentry/lesson-template">Source</a>
        <a class="label swc-blue-bg" href="mailto:admin@software-carpentry.org">Contact</a>
        <a class="label swc-blue-bg" href="LICENSE.html">License</a>
      </div>
    </div>
    <!-- Javascript placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="css/bootstrap/bootstrap-js/bootstrap.js"></script>
    <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
  </body>
</html>
