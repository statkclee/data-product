<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <title>Software Carpentry: xwMOOC 데이터 저널리즘</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="css/swc.css" />
    <link rel="alternate" type="application/rss+xml" title="Software Carpentry Blog" href="http://software-carpentry.org/feed.xml"/>
    <meta charset="UTF-8" />
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    
      ga('create', 'UA-59802572-17', 'auto');
      ga('send', 'pageview');
    
    </script>
  </head>
  <body class="lesson">
    <div class="container card">
      <div class="banner">
        <a href="http://software-carpentry.org" title="Software Carpentry">
          <img alt="Software Carpentry banner" src="img/software-carpentry-banner.png" />
        </a>
      </div>
      <article>
      <div class="row">
        <div class="col-md-10 col-md-offset-1">
                    <a href="index.html"><h1 class="title">xwMOOC 데이터 저널리즘</h1></a>
          <h2 class="subtitle">코에이(Koei) 삼국지 국력비교</h2>
          <h2 id="podcast-koei-three-kingdoms">1. 팟캐스트로 듣는 코에이 삼국지 <a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></h2>
<p><a href="http://xsfm.co.kr/wp/">그것은 알기 싫다(XSFM)</a> 팟캐스트에 최근 코에이 삼국지를 주제로 방송을 시작했다. 서양에 <a href="https://ko.wikipedia.org/wiki/%EC%8B%9C%EC%98%A4%EB%85%B8_%EB%82%98%EB%82%98%EB%AF%B8">시오노 나나미</a> “로마인 이야기”가 있다면 동양은 나관중의 삼국지가 있다고 생각하는 한국인이 많다.</p>
<p>코에이 삼국지 1,2,3편을 직접 플레이하면 숫자와 문자만 가득하다. 삼국을 통일하기 위해서 몇달을 고생해서 밤을 새워가며 시간을 보낸 분들도 주변에서 부지기수로 볼 수 있고, 삼국지 게임을 더 잘 하기 위해서 삼국지를 게임을 한 후에 정독하는 사례도 심심치 않게 볼 수 있다.</p>
<p>이번에는 코에이 삼국지 게임 데이터를 추출하여 데이터를 분석해 보자.</p>
<h2 id="keoi-three-kingdoms-reality">2. 삼국지 실제 국력차이</h2>
<p>삼국지의 조조, 유비, 손권이 게임에서는 대등하게 나오지만, 최근에 출시되는 삼국지는 실제 역사적 사실에 근거를 두고 나름 정확한 데이터가 담겨있다. 문명도 예외가 아닌데 양성균형, 서양, 백인, 남성 중심의 세계관을 조금 약화시키고 동양을 비롯한 제3세계와 여성의 비중을 늘리는 것도 사실이다.</p>
<p>위촉오 삼국간의 국력에 대한 주제를 다루었던 유튜브 동영상에 근거하여 실제 게임에서 데이터를 추출하여 비교분석해 보자. 유튜브 동영상에서 주장하는 내용을 요약하면 다음과 같다.</p>
<ul>
<li>영토크기: 개발된 영토만 고려하면 위나라가 월등.</li>
<li>인구: 위나라 440만, 오나라 230만, 촉나라 90만 정도</li>
<li>토지: 위나라 고품질 토지, 오나라 수상지역, 촉나라 산악지역.</li>
<li>인재: 위나라의 문화수준이 높아 인재도 많음.</li>
</ul>
<iframe width="300" height="180" src="https://www.youtube.com/embed/DbpKKZMe52s" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen>
</iframe>
<p>삼국지에서 인재가 상당한 역할을 담당하고, 인물중심으로 삼국지를 이해하는 부분이 크기 때문에 코에이 삼국지에 나타난 국력비교를 위해서 이를 별도로 뺀다.</p>
<h2 id="koei-three-kingdoms-ingame">3. 코에이 삼국지 13에 표현된 국력차이</h2>
<h3 id="import-data">3.1. 데이터 가져오기</h3>
<p>코에이 삼국지 게임에 편집기를 붙여 데이터를 추출하여 엑셀로 저장한다. 다양한 데이터를 추출할 수 있지만, 인재와 관련된 장군 데이터와 주/도시와 관련된 데이터를 붙인다. 그리고 군단 정보에서 관우와 장로는 촉으로 장료와 공손공은 조조는 위로 손권은 오로 범주를 구분하고 결측값이 포함된 나머지는 분석에서 제외한다.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="co"># 0. 환경설정 -----</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a><span class="kw">library</span>(readxl)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a><span class="kw">library</span>(DT)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a><span class="kw">library</span>(treemap)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true"></a><span class="kw">library</span>(ggridges)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true"></a><span class="kw">library</span>(ggpubr)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true"></a><span class="kw">library</span>(d3scatter)</span></code></pre></div>
<pre class="output"><code>Error in library(d3scatter): there is no package called &#39;d3scatter&#39;
</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="kw">library</span>(plotly)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a><span class="kw">library</span>(crosstalk)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a><span class="kw">library</span>(htmltools)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true"></a><span class="kw">library</span>(d3treeR)</span></code></pre></div>
<pre class="output"><code>Error in library(d3treeR): there is no package called &#39;d3treeR&#39;
</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a><span class="kw">library</span>(extrafont)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true"></a><span class="kw">loadfonts</span>()</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true"></a><span class="co"># 1. 데이터 가져오기 -----</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true"></a>city_dat &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">&quot;data/삼국지13.xlsx&quot;</span>, <span class="dt">sheet=</span><span class="st">&quot;도시&quot;</span>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true"></a><span class="co"># 2. 데이터 정제 -----</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true"></a>city_df &lt;-<span class="st"> </span>city_dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(지방, 도시, 주, 주도, 군단, 태수, 자금, 군량, 비병역인구, 병역인구, 상업, 농업, 문화) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(삼국 =<span class="st"> </span><span class="kw">case_when</span>(군단 <span class="op">==</span><span class="st"> &quot;관우&quot;</span> <span class="op">~</span><span class="st"> &quot;촉&quot;</span>,</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true"></a>                           군단 <span class="op">==</span><span class="st"> &quot;유비&quot;</span> <span class="op">~</span><span class="st"> &quot;촉&quot;</span>,</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true"></a>                           군단 <span class="op">==</span><span class="st"> &quot;장로&quot;</span> <span class="op">~</span><span class="st"> &quot;촉&quot;</span>,</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true"></a>                           군단 <span class="op">==</span><span class="st"> &quot;조조&quot;</span> <span class="op">~</span><span class="st"> &quot;위&quot;</span>,</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true"></a>                           군단 <span class="op">==</span><span class="st"> &quot;장료&quot;</span> <span class="op">~</span><span class="st"> &quot;위&quot;</span>,</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true"></a>                           군단 <span class="op">==</span><span class="st"> &quot;공손공&quot;</span> <span class="op">~</span><span class="st"> &quot;위&quot;</span>,</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true"></a>                           군단 <span class="op">==</span><span class="st"> &quot;손권&quot;</span> <span class="op">~</span><span class="st"> &quot;오&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(삼국)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(인구 =<span class="st"> </span>비병역인구 <span class="op">+</span><span class="st"> </span>병역인구)</span></code></pre></div>
<h3 id="koei-three-kingdoms-pop">3.2. 국력으로 본 인구수</h3>
<p>삼국 도시와 인구수를 먼저 뽑아 이를 표로 표현한다.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a><span class="co"># 3. EDA - 도시수와 인구수 -----</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true"></a><span class="co">## 3.1. 도시수</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true"></a>city_df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(삼국) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true"></a><span class="st">  </span><span class="kw">count</span>(주) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true"></a><span class="st">  </span><span class="kw">spread</span>(삼국, n, <span class="dt">fill=</span><span class="dv">0</span>)  <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true"></a><span class="st">  </span><span class="kw">datatable</span>()</span></code></pre></div>
<p><img src="fig/koei-three-kingdoms-pop-city-1.png" title="plot of chunk koei-three-kingdoms-pop-city" alt="plot of chunk koei-three-kingdoms-pop-city" style="display: block; margin: auto;" /></p>
<p>삼국 인구수를 좀더 상세히 살펴보면 다음과 같다.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true"></a><span class="co">## 3.2. 인구수</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true"></a>city_df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(삼국) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">summarise</span>(인구수 =<span class="st"> </span><span class="kw">sum</span>(인구)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(인구비율 =<span class="st"> </span>인구수<span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(인구수)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(인구수)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true"></a><span class="st">  </span><span class="kw">datatable</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true"></a><span class="st">    </span><span class="kw">formatCurrency</span>(<span class="st">&quot;인구수&quot;</span>, <span class="dt">currency=</span><span class="st">&quot;&quot;</span>, <span class="dt">digits=</span><span class="dv">0</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true"></a><span class="st">    </span><span class="kw">formatPercentage</span>(<span class="st">&quot;인구비율&quot;</span>, <span class="dt">digits=</span><span class="dv">1</span>) </span></code></pre></div>
<p><img src="fig/koei-three-kingdoms-pop-1.png" title="plot of chunk koei-three-kingdoms-pop" alt="plot of chunk koei-three-kingdoms-pop" style="display: block; margin: auto;" /></p>
<p>삼국 도시와 인구수를 먼저 뽑은 자료를 <code>treemap</code>을 통해 시각화한다.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true"></a><span class="co">## 3.3. treemap: 삼국 - 주 - 도시 - 인구수</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true"></a>city_treemap_df &lt;-<span class="st"> </span>city_df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(삼국, 주, 도시) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">summarise</span>(인구수 =<span class="st"> </span><span class="kw">sum</span>(인구))</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true"></a>city_pop_treemap &lt;-<span class="st"> </span><span class="kw">treemap</span>(city_treemap_df, </span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true"></a>                              <span class="dt">index =</span> <span class="kw">c</span>(<span class="st">&quot;삼국&quot;</span>, <span class="st">&quot;주&quot;</span>, <span class="st">&quot;도시&quot;</span>),  </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true"></a>                              <span class="dt">vSize =</span> <span class="st">&quot;인구수&quot;</span>, </span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true"></a>                              <span class="dt">vColor =</span> <span class="st">&quot;삼국&quot;</span>,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true"></a>                              <span class="dt">title =</span> <span class="st">&quot;삼국지 국력 - 인구수&quot;</span>, </span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true"></a>                              <span class="dt">fontsize.labels=</span><span class="kw">c</span>(<span class="dv">12</span>, <span class="dv">8</span>), </span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true"></a>                              <span class="dt">draw =</span> <span class="ot">TRUE</span>,</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true"></a>                              <span class="dt">type =</span> <span class="st">&quot;categorical&quot;</span>, </span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true"></a>                              <span class="dt">palette =</span> <span class="kw">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;blue&quot;</span>, <span class="st">&quot;green&quot;</span>),</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true"></a>                              <span class="dt">fontfamily.title =</span> <span class="st">&quot;NanumGothic&quot;</span>,</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true"></a>                              <span class="dt">format.legend =</span> <span class="kw">list</span>(<span class="dt">scientific =</span> <span class="ot">FALSE</span>, <span class="dt">big.mark =</span> <span class="st">&quot;,&quot;</span>),</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true"></a>                              <span class="dt">title.legend=</span><span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p><img src="fig/koei-three-kingdoms-pop-treemap-1.png" title="plot of chunk koei-three-kingdoms-pop-treemap" alt="plot of chunk koei-three-kingdoms-pop-treemap" style="display: block; margin: auto;" /></p>
<p>인터랙티브하게 동적으로 파악하면 좀더 쉽게 인구수 차이를 면밀하게 검토할 수 있다.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true"></a><span class="co">### 인구수 treemap 동적 그래프                 </span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true"></a><span class="kw">d3tree2</span>(city_pop_treemap, <span class="dt">rootname =</span> <span class="st">&quot;삼국지&quot;</span>)</span></code></pre></div>
<pre class="output"><code>Error in d3tree2(city_pop_treemap, rootname = &quot;삼국지&quot;): could not find function &quot;d3tree2&quot;
</code></pre>
<h3 id="koei-three-kingdoms-agri">3.3. 국력으로 본 농업</h3>
<p>삼국 농업과 상업을 뽑아 동일한 방식으로 비교한다.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true"></a><span class="co"># 4. EDA - 농업/상업 -----</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true"></a><span class="co">## 4.1. 농업</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true"></a>city_df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(삼국, 주) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true"></a><span class="st">  </span><span class="kw">summarise</span>(도시수 =<span class="st"> </span><span class="kw">n</span>(),</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true"></a>            농업 =<span class="st"> </span><span class="kw">sum</span>(농업),</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true"></a>            상업 =<span class="st"> </span><span class="kw">sum</span>(상업)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true"></a><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(농업비율 =<span class="st"> </span>농업<span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(농업),</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true"></a>         상업비율 =<span class="st"> </span>상업<span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(상업)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true"></a><span class="st">  </span><span class="kw">datatable</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true"></a><span class="st">  </span><span class="kw">formatCurrency</span>(<span class="kw">c</span>(<span class="st">&quot;농업&quot;</span>,<span class="st">&quot;상업&quot;</span>), <span class="dt">currency=</span><span class="st">&quot;&quot;</span>, <span class="dt">digits=</span><span class="dv">0</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true"></a><span class="st">  </span><span class="kw">formatPercentage</span>(<span class="kw">c</span>(<span class="st">&quot;농업비율&quot;</span>, <span class="st">&quot;상업비율&quot;</span>), <span class="dt">digits=</span><span class="dv">1</span>) </span></code></pre></div>
<p><img src="fig/koei-three-kingdoms-agri-1.png" title="plot of chunk koei-three-kingdoms-agri" alt="plot of chunk koei-three-kingdoms-agri" style="display: block; margin: auto;" /></p>
<p>삼국 농업을 뽑아 <code>treemap</code>으로 시각화한다.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true"></a><span class="co">## 3.3. treemap: 삼국 - 주 - 도시 - 농업</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true"></a>agr_treemap_df &lt;-<span class="st"> </span>city_df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(삼국, 주, 도시) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true"></a><span class="st">  </span><span class="kw">summarise</span>(농업 =<span class="st"> </span><span class="kw">sum</span>(농업))</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true"></a>agr_treemap &lt;-<span class="st"> </span><span class="kw">treemap</span>(agr_treemap_df, </span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true"></a>                            <span class="dt">index =</span> <span class="kw">c</span>(<span class="st">&quot;삼국&quot;</span>, <span class="st">&quot;주&quot;</span>, <span class="st">&quot;도시&quot;</span>),  </span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true"></a>                            <span class="dt">vSize =</span> <span class="st">&quot;농업&quot;</span>, </span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true"></a>                            <span class="dt">vColor =</span> <span class="st">&quot;삼국&quot;</span>,</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true"></a>                            <span class="dt">title =</span> <span class="st">&quot;삼국지 국력 - 농업&quot;</span>, </span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true"></a>                            <span class="dt">fontsize.labels=</span><span class="kw">c</span>(<span class="dv">12</span>, <span class="dv">8</span>), </span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true"></a>                            <span class="dt">draw =</span> <span class="ot">TRUE</span>,</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true"></a>                            <span class="dt">type =</span> <span class="st">&quot;categorical&quot;</span>, </span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true"></a>                            <span class="dt">palette =</span> <span class="kw">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;blue&quot;</span>, <span class="st">&quot;green&quot;</span>),</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true"></a>                            <span class="dt">fontfamily.title =</span> <span class="st">&quot;NanumGothic&quot;</span>,</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true"></a>                            <span class="dt">format.legend =</span> <span class="kw">list</span>(<span class="dt">scientific =</span> <span class="ot">FALSE</span>, <span class="dt">big.mark =</span> <span class="st">&quot;,&quot;</span>),</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true"></a>                            <span class="dt">title.legend=</span><span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p><img src="fig/koei-three-kingdoms-agri-treemap-1.png" title="plot of chunk koei-three-kingdoms-agri-treemap" alt="plot of chunk koei-three-kingdoms-agri-treemap" style="display: block; margin: auto;" /></p>
<p>인터랙티브하게 동적으로 파악하면 좀더 쉽게 농업 차이를 면밀하게 검토할 수 있다.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true"></a><span class="co">### 농업 treemap 동적 그래프                 </span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true"></a><span class="kw">d3tree2</span>(agr_treemap, <span class="dt">rootname =</span> <span class="st">&quot;삼국지&quot;</span>)</span></code></pre></div>
<pre class="output"><code>Error in d3tree2(agr_treemap, rootname = &quot;삼국지&quot;): could not find function &quot;d3tree2&quot;
</code></pre>
<section class="footnotes" role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p><a href="http://xsfm.co.kr/wp/?p=2101">256a. 팟캐문학관:코에이 삼국지(1/2) /이경혁</a><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
        </div>
      </div>
      </article>
      <div class="footer">
        <a class="label swc-blue-bg" href="http://software-carpentry.org">Software Carpentry</a>
        <a class="label swc-blue-bg" href="https://github.com/swcarpentry/lesson-template">Source</a>
        <a class="label swc-blue-bg" href="mailto:admin@software-carpentry.org">Contact</a>
        <a class="label swc-blue-bg" href="LICENSE.html">License</a>
      </div>
    </div>
    <!-- Javascript placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="css/bootstrap/bootstrap-js/bootstrap.js"></script>
    <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
  </body>
</html>
