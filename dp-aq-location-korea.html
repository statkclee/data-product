<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <title>Software Carpentry: xwMOOC 데이터 저널리즘</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="css/swc.css" />
    <link rel="alternate" type="application/rss+xml" title="Software Carpentry Blog" href="http://software-carpentry.org/feed.xml"/>
    <meta charset="UTF-8" />
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    
      ga('create', 'UA-59802572-17', 'auto');
      ga('send', 'pageview');
    
    </script>
  </head>
  <body class="lesson">
    <div class="container card">
      <div class="banner">
        <a href="http://software-carpentry.org" title="Software Carpentry">
          <img alt="Software Carpentry banner" src="img/software-carpentry-banner.png" />
        </a>
      </div>
      <article>
      <div class="row">
        <div class="col-md-10 col-md-offset-1">
                    <a href="index.html"><h1 class="title">xwMOOC 데이터 저널리즘</h1></a>
          <h2 class="subtitle">측정소 위치 - 대한민국</h2>
          <h2 id="air-quality-inequality">1. 공기 불평등 민주화</h2>
<p>공기질이 삶의 질에 영향을 지대하게 미친다. 깨끗한 공기는 건강과 직결된다. 공기 불평등과 투쟁을 선언한 <a href="https://openaq.org/">OpenAQ(Open Air Quality)</a> “2018-01-29” 기준 64개국에 설치된 8,254개 측정솔ㄹ 통해 155,673,930 공기품질 측정값을 수집하여 제공하고 있다.</p>
<h2 id="air-quality-inequality-korea-count">2. 대한민국 측정소 현황</h2>
<p>공기질 측정소 현황은 한국환경공단 <a href="https://www.airkorea.or.kr/">Air Korea</a> 홈페이지 <strong>통계정보 → 대기환경 연월보</strong>에서 대기환경 연보 최신 2016년 다운로드 받으면 구할 수 있다. 데이터가 깔끔(tidy)하지 않은 더러운(messy) 형태라 <code>tidyverse</code> 다양한 기능을 활용하여 정제작업을 거친다.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="co"># 0. 환경설정 ------</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a><span class="kw">library</span>(readxl)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a><span class="kw">library</span>(purrr)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true"></a><span class="kw">library</span>(xts)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true"></a><span class="kw">library</span>(leaflet)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true"></a><span class="kw">library</span>(crosstalk)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true"></a><span class="kw">library</span>(DT)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true"></a><span class="co"># 1. 데이터 가져오기 -----</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true"></a>    </span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true"></a>loc_dat &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">&quot;data/air_korea_2016/부록14.대기오염측정망 제원_170927.xls&quot;</span>, <span class="dt">sheet=</span><span class="st">&quot;2016년&quot;</span>, <span class="dt">skip=</span><span class="dv">4</span>)    </span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true"></a><span class="kw">names</span>(loc_dat) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;시도&quot;</span>, <span class="st">&quot;도시&quot;</span>, <span class="st">&quot;측정소코드&quot;</span>, <span class="st">&quot;측정소명&quot;</span>, <span class="st">&quot;주소&quot;</span>, <span class="st">&quot;longitude_DMS&quot;</span>, <span class="st">&quot;latitude_DMS&quot;</span>, <span class="st">&quot;비고&quot;</span>)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true"></a><span class="co"># 2. 데이터 변환 -----</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true"></a>대기_df &lt;-<span class="st"> </span>loc_dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(<span class="kw">row_number</span>() <span class="op">&lt;=</span><span class="st"> </span><span class="dv">281</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(측정기능 =<span class="st"> &quot;도시대기&quot;</span>)</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true"></a>도로_df &lt;-<span class="st"> </span>loc_dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(<span class="kw">row_number</span>() <span class="op">&gt;=</span><span class="st"> </span><span class="dv">287</span>,</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true"></a>           <span class="kw">row_number</span>() <span class="op">&lt;=</span><span class="st"> </span><span class="dv">326</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(측정기능 =<span class="st"> &quot;도로변대기&quot;</span>)</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true"></a></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true"></a>배경농도_df &lt;-<span class="st"> </span>loc_dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(<span class="kw">row_number</span>() <span class="op">&gt;=</span><span class="st"> </span><span class="dv">330</span>,</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true"></a>           <span class="kw">row_number</span>() <span class="op">&lt;=</span><span class="st"> </span><span class="dv">334</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(측정기능 =<span class="st"> &quot;국가배경농도&quot;</span>)</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true"></a></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true"></a>교외대기_df &lt;-<span class="st"> </span>loc_dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(<span class="kw">row_number</span>() <span class="op">&gt;=</span><span class="st"> </span><span class="dv">340</span>,</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true"></a>           <span class="kw">row_number</span>() <span class="op">&lt;=</span><span class="st"> </span><span class="dv">358</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(측정기능 =<span class="st"> &quot;교외대기&quot;</span>)</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true"></a></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true"></a>중금속_df &lt;-<span class="st"> </span>loc_dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(<span class="kw">row_number</span>() <span class="op">&gt;=</span><span class="st"> </span><span class="dv">364</span>,</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true"></a>           <span class="kw">row_number</span>() <span class="op">&lt;=</span><span class="st"> </span><span class="dv">421</span>)  <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(측정기능 =<span class="st"> &quot;대기중금속&quot;</span>)</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true"></a></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true"></a>광화학_df &lt;-<span class="st"> </span>loc_dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(<span class="kw">row_number</span>() <span class="op">&gt;=</span><span class="st"> </span><span class="dv">427</span>,</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true"></a>           <span class="kw">row_number</span>() <span class="op">&lt;=</span><span class="st"> </span><span class="dv">446</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(측정기능 =<span class="st"> &quot;광화학오염&quot;</span>)</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true"></a></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true"></a>유해물질_df &lt;-<span class="st"> </span>loc_dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(<span class="kw">row_number</span>() <span class="op">&gt;=</span><span class="st"> </span><span class="dv">451</span>,</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true"></a>           <span class="kw">row_number</span>() <span class="op">&lt;=</span><span class="st"> </span><span class="dv">483</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(측정기능 =<span class="st"> &quot;유해대기물질&quot;</span>)</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true"></a></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true"></a>산성강하_df &lt;-<span class="st"> </span>loc_dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(<span class="kw">row_number</span>() <span class="op">&gt;=</span><span class="st"> </span><span class="dv">489</span>,</span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true"></a>           <span class="kw">row_number</span>() <span class="op">&lt;=</span><span class="st"> </span><span class="dv">528</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(측정기능 =<span class="st"> &quot;산성강하물&quot;</span>)</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true"></a></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true"></a>대기오염집중_df &lt;-<span class="st"> </span>loc_dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(<span class="kw">row_number</span>() <span class="op">&gt;=</span><span class="st"> </span><span class="dv">534</span>,</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true"></a>           <span class="kw">row_number</span>() <span class="op">&lt;=</span><span class="st"> </span><span class="dv">539</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(측정기능 =<span class="st"> &quot;대기오염집중&quot;</span>)</span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true"></a></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true"></a></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true"></a>PM25_df &lt;-<span class="st"> </span>loc_dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(<span class="kw">row_number</span>() <span class="op">&gt;=</span><span class="st"> </span><span class="dv">545</span>,</span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true"></a>           <span class="kw">row_number</span>() <span class="op">&lt;=</span><span class="st"> </span><span class="dv">579</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(측정기능 =<span class="st"> &quot;PM25&quot;</span>)</span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true"></a></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true"></a>종합대기_df &lt;-<span class="st"> </span>loc_dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(<span class="kw">row_number</span>() <span class="op">&gt;=</span><span class="st"> </span><span class="dv">585</span>,</span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true"></a>           <span class="kw">row_number</span>() <span class="op">&lt;=</span><span class="st"> </span><span class="dv">599</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(측정기능 =<span class="st"> &quot;종합대기&quot;</span>)</span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true"></a></span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true"></a><span class="co"># 3. 데이터 취합 -----</span></span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true"></a></span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true"></a>tmp &lt;-<span class="st"> </span><span class="kw">mget</span>(<span class="kw">ls</span>(<span class="dt">pattern=</span><span class="st">&quot;_df&quot;</span>))</span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true"></a></span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true"></a>air_df &lt;-<span class="st"> </span><span class="kw">map_df</span>(tmp, bind_rows)</span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true"></a></span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true"></a><span class="co"># 4. 데이터 정제 -----</span></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true"></a>air_df &lt;-<span class="st"> </span>air_df <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true"></a><span class="st">    </span><span class="kw">filter</span>(측정소명 <span class="op">!=</span><span class="st"> &quot;측정소명&quot;</span>,</span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true"></a>           <span class="op">!</span><span class="kw">is.na</span>(측정소명))  <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(시도 =<span class="st"> </span><span class="kw">na.locf</span>(시도),</span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true"></a>           도시 =<span class="st"> </span><span class="kw">na.locf</span>(도시),</span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true"></a>           측정소코드 =<span class="st"> </span><span class="kw">na.locf</span>(측정소코드),</span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true"></a>           측정소명 =<span class="st"> </span><span class="kw">na.locf</span>(측정소명))</span></code></pre></div>
<h2 id="air-quality-inequality-korea-leaflet">3. 측정 기능별 측정소 위치 시각화</h2>
<p>총 12 개 기능을 갖는 다양한 공기품질 측정소가 전국에 산재하여 있다. 하지만, 측정소 위치가 도분초로 되어 있어 이를 도로 변환하는 과정을 거친다.</p>
<p>그리고 나서, <code>crosstalk</code> 기능을 추가하여 <code>leaflet</code>에서 공기품질 측정기능별로 측정소 위치를 파악할 수 있도록 작업한다.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="co"># 1. 데이터 정제: 도분초 --&gt; 도 변환 -----</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a>air_df &lt;-<span class="st"> </span>air_df <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true"></a><span class="st">    </span>tidyr<span class="op">::</span><span class="kw">separate</span>(longitude_DMS, <span class="dt">into=</span><span class="kw">c</span>(<span class="st">&quot;경도_도&quot;</span>, <span class="st">&quot;경도_분&quot;</span>, <span class="st">&quot;경도_초&quot;</span>), <span class="dt">sep=</span><span class="st">&quot; &quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true"></a><span class="st">    </span>tidyr<span class="op">::</span><span class="kw">separate</span>(latitude_DMS, <span class="dt">into=</span><span class="kw">c</span>(<span class="st">&quot;위도_도&quot;</span>, <span class="st">&quot;위도_분&quot;</span>, <span class="st">&quot;위도_초&quot;</span>), <span class="dt">sep=</span><span class="st">&quot; &quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">longitude =</span> <span class="kw">as.numeric</span>(경도_도) <span class="op">+</span><span class="st"> </span><span class="kw">as.numeric</span>(경도_분)<span class="op">/</span><span class="dv">60</span> <span class="op">+</span><span class="st"> </span><span class="kw">as.numeric</span>(경도_초)<span class="op">/</span><span class="dv">3600</span>) <span class="op">%&gt;%</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">latitude  =</span> <span class="kw">as.numeric</span>(위도_도) <span class="op">+</span><span class="st"> </span><span class="kw">as.numeric</span>(위도_분)<span class="op">/</span><span class="dv">60</span> <span class="op">+</span><span class="st"> </span><span class="kw">as.numeric</span>(위도_초)<span class="op">/</span><span class="dv">3600</span>)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true"></a><span class="co"># 2. 공간정보 시각화 -----</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true"></a><span class="co">## 2.1. 공유 데이터</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true"></a>air_sd &lt;-<span class="st"> </span>SharedData<span class="op">$</span><span class="kw">new</span>(air_df)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true"></a><span class="co">## 2.2. 제어</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true"></a><span class="kw">filter_checkbox</span>(<span class="st">&quot;측정기능&quot;</span>, <span class="st">&quot;대기오염측정망 제원&quot;</span>, air_sd, <span class="op">~</span>측정기능, <span class="dt">inline =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<!--html_preserve-->
<div id="측정기능" class="form-group crosstalk-input-checkboxgroup crosstalk-input">
<label class="control-label" for="측정기능">대기오염측정망 제원</label>
<div class="crosstalk-options-group">
<p><label class="checkbox-inline"> <input type="checkbox" name="측정기능" value="PM25"/> <span>PM25</span> </label> <label class="checkbox-inline"> <input type="checkbox" name="측정기능" value="광화학오염"/> <span>광화학오염</span> </label> <label class="checkbox-inline"> <input type="checkbox" name="측정기능" value="교외대기"/> <span>교외대기</span> </label> <label class="checkbox-inline"> <input type="checkbox" name="측정기능" value="국가배경농도"/> <span>국가배경농도</span> </label> <label class="checkbox-inline"> <input type="checkbox" name="측정기능" value="대기중금속"/> <span>대기중금속</span> </label> <label class="checkbox-inline"> <input type="checkbox" name="측정기능" value="도로변대기"/> <span>도로변대기</span> </label> <label class="checkbox-inline"> <input type="checkbox" name="측정기능" value="도시대기"/> <span>도시대기</span> </label> <label class="checkbox-inline"> <input type="checkbox" name="측정기능" value="산성강하물"/> <span>산성강하물</span> </label> <label class="checkbox-inline"> <input type="checkbox" name="측정기능" value="유해대기물질"/> <span>유해대기물질</span> </label> <label class="checkbox-inline"> <input type="checkbox" name="측정기능" value="종합대기"/> <span>종합대기</span> </label></p>
</div>
<script type="application/json" data-for="측정기능">{
  "map": {
    "PM25": ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30"],
    "광화학오염": ["31", "32", "33", "34", "35", "36", "37", "38", "39", "40", "41", "42", "43", "44", "45", "46", "47", "48", "49", "50"],
    "교외대기": ["51", "52", "53", "54", "55", "56", "57", "58", "59", "60", "61", "62", "63", "64", "65", "66", "67", "68", "69"],
    "국가배경농도": ["378", "379", "380"],
    "대기중금속": ["469", "470", "471", "472", "473", "474", "475", "476", "477", "478", "479", "480", "481", "482", "483", "484", "485", "486", "487", "488", "489", "490", "491", "492", "493", "494", "495", "496", "497", "498", "499", "500", "501", "502", "503", "504", "505", "506", "507", "508", "509", "510", "511", "512", "513", "514", "515", "516", "517", "518", "519", "520", "521", "522", "523", "524", "525"],
    "도로변대기": ["339", "340", "341", "342", "343", "344", "345", "346", "347", "348", "349", "350", "351", "352", "353", "354", "355", "356", "357", "358", "359", "360", "361", "362", "363", "364", "365", "366", "367", "368", "369", "370", "371", "372", "373", "374", "375", "376", "377"],
    "도시대기": ["70", "71", "72", "73", "74", "75", "76", "77", "78", "79", "80", "81", "82", "83", "84", "85", "86", "87", "88", "89", "90", "91", "92", "93", "94", "95", "96", "97", "98", "99", "100", "101", "102", "103", "104", "105", "106", "107", "108", "109", "110", "111", "112", "113", "114", "115", "116", "117", "118", "119", "120", "121", "122", "123", "124", "125", "126", "127", "128", "129", "130", "131", "132", "133", "134", "135", "136", "137", "138", "139", "140", "141", "142", "143", "144", "145", "146", "147", "148", "149", "150", "151", "152", "153", "154", "155", "156", "157", "158", "159", "160", "161", "162", "163", "164", "165", "166", "167", "168", "169", "170", "171", "172", "173", "174", "175", "176", "177", "178", "179", "180", "181", "182", "183", "184", "185", "186", "187", "188", "189", "190", "191", "192", "193", "194", "195", "196", "197", "198", "199", "200", "201", "202", "203", "204", "205", "206", "207", "208", "209", "210", "211", "212", "213", "214", "215", "216", "217", "218", "219", "220", "221", "222", "223", "224", "225", "226", "227", "228", "229", "230", "231", "232", "233", "234", "235", "236", "237", "238", "239", "240", "241", "242", "243", "244", "245", "246", "247", "248", "249", "250", "251", "252", "253", "254", "255", "256", "257", "258", "259", "260", "261", "262", "263", "264", "265", "266", "267", "268", "269", "270", "271", "272", "273", "274", "275", "276", "277", "278", "279", "280", "281", "282", "283", "284", "285", "286", "287", "288", "289", "290", "291", "292", "293", "294", "295", "296", "297", "298", "299", "300", "301", "302", "303", "304", "305", "306", "307", "308", "309", "310", "311", "312", "313", "314", "315", "316", "317", "318", "319", "320", "321", "322", "323", "324", "325", "326", "327", "328", "329", "330", "331", "332", "333", "334", "335", "336", "337", "338"],
    "산성강하물": ["381", "382", "383", "384", "385", "386", "387", "388", "389", "390", "391", "392", "393", "394", "395", "396", "397", "398", "399", "400", "401", "402", "403", "404", "405", "406", "407", "408", "409", "410", "411", "412", "413", "414", "415", "416", "417", "418", "419", "420"],
    "유해대기물질": ["421", "422", "423", "424", "425", "426", "427", "428", "429", "430", "431", "432", "433", "434", "435", "436", "437", "438", "439", "440", "441", "442", "443", "444", "445", "446", "447", "448", "449", "450", "451", "452", "453"],
    "종합대기": ["454", "455", "456", "457", "458", "459", "460", "461", "462", "463", "464", "465", "466", "467", "468"]
  },
  "group": ["SharedData391d7ffa"]
}</script>
</div>
<!--/html_preserve-->
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="co">## 2.3. 공간 정보 시각화</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a><span class="kw">leaflet</span>(<span class="dt">data =</span> air_sd) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a><span class="st">    </span><span class="kw">addProviderTiles</span>(providers<span class="op">$</span>OpenStreetMap) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true"></a><span class="st">    </span><span class="kw">addMarkers</span>(<span class="dt">popup =</span> <span class="op">~</span><span class="st"> </span><span class="kw">as.character</span>(<span class="kw">paste0</span>(<span class="st">&quot;&lt;strong&gt;&quot;</span>, <span class="kw">paste0</span>(<span class="st">&quot;측정소명: &quot;</span>, 측정소명), <span class="st">&quot;&lt;/strong&gt;&lt;br&gt;&lt;br&gt;&quot;</span>,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true"></a>                                             <span class="st">&quot;-----------------------------------------------------------&lt;br&gt;&quot;</span>,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true"></a>                                             <span class="st">&quot;&amp;middot; 측정기능: &quot;</span>, 측정기능, <span class="st">&quot;&lt;br&gt;&quot;</span>,</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true"></a>                                             <span class="st">&quot;&amp;middot; 시도: &quot;</span>, 시도, <span class="st">&quot;&lt;br&gt;&quot;</span>,</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true"></a>                                             <span class="st">&quot;&amp;middot; 도시: &quot;</span>, 도시, <span class="st">&quot;&lt;br&gt;&quot;</span>,</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true"></a>                                             <span class="st">&quot;&amp;middot; 주소: &quot;</span>, 주소, <span class="st">&quot;&lt;br&gt;&quot;</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true"></a>               )))    </span></code></pre></div>
<p><img src="fig/airquality-location-korea-leaflet-1.png" title="plot of chunk airquality-location-korea-leaflet" alt="plot of chunk airquality-location-korea-leaflet" style="display: block; margin: auto;" /></p>
<h2 id="air-quality-inequality-korea-table">3. 측정 기능별 측정소 위치 상세</h2>
<p>층정 기능별 측정소 상세정보를 표로 살펴보자.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a>air_df <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a><span class="st">    </span><span class="kw">select</span>(측정기능, 시도, 도시, 측정소코드, 측정소명, 주소, 비고, </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true"></a>             경도=longitude, 위도=latitude) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true"></a><span class="st">    </span>DT<span class="op">::</span><span class="kw">datatable</span>(<span class="dt">filter =</span> <span class="st">&quot;top&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true"></a><span class="st">    </span><span class="kw">formatCurrency</span>(<span class="kw">c</span>(<span class="st">&quot;경도&quot;</span>, <span class="st">&quot;위도&quot;</span>), <span class="dt">currency=</span><span class="st">&quot;&quot;</span>, <span class="dt">digits=</span><span class="dv">6</span>)</span></code></pre></div>
<p><img src="fig/airquality-location-korea-table-1.png" title="plot of chunk airquality-location-korea-table" alt="plot of chunk airquality-location-korea-table" style="display: block; margin: auto;" /></p>
        </div>
      </div>
      </article>
      <div class="footer">
        <a class="label swc-blue-bg" href="http://software-carpentry.org">Software Carpentry</a>
        <a class="label swc-blue-bg" href="https://github.com/swcarpentry/lesson-template">Source</a>
        <a class="label swc-blue-bg" href="mailto:admin@software-carpentry.org">Contact</a>
        <a class="label swc-blue-bg" href="LICENSE.html">License</a>
      </div>
    </div>
    <!-- Javascript placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="css/bootstrap/bootstrap-js/bootstrap.js"></script>
    <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
  </body>
</html>
