<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <title>Software Carpentry: xwMOOC 데이터 제품</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="css/swc.css" />
    <link rel="alternate" type="application/rss+xml" title="Software Carpentry Blog" href="http://software-carpentry.org/feed.xml"/>
    <meta charset="UTF-8" />
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    
      ga('create', 'UA-59802572-17', 'auto');
      ga('send', 'pageview');
    
    </script>
  </head>
  <body class="lesson">
    <div class="container card">
      <div class="banner">
        <a href="http://software-carpentry.org" title="Software Carpentry">
          <img alt="Software Carpentry banner" src="img/software-carpentry-banner.png" />
        </a>
      </div>
      <article>
      <div class="row">
        <div class="col-md-10 col-md-offset-1">
                    <a href="index.html"><h1 class="title">xwMOOC 데이터 제품</h1></a>
          <h2 class="subtitle">비디오 게임</h2>
          <h1 id="video-game-strategy">비디오 게임 분석 방향</h1>
<p>비디오 게임 시장별(북미, 유럽, 일본, 기타)로 나눠진 매출을 유저평점, 전문가평점과 게임 플랫폼, 개발사, 퍼블리셔 데이터를 담고 있으면 발매년도도 포함되어 있다.</p>
<p><code>global_sales</code> 매출을 <span class="math inline">\(Y\)</span>로 잡고 다른 변수를 설명변수로 두고 데이터를 이해하도록 한다.</p>
<p><img src="fig/video_game_strategy.png" alt="비디오 게임" width="100%" /></p>
<h1 id="video-game-data">데이터</h1>
<p><a href="http://www.vgchartz.com/gamedb/">VGChartz</a> 웹사이트 데이터를 <a href="https://github.com/GregorUT/vgchartzScrape">Scrapy project for data capture of vgchartz</a> 스크립트를 통해서 데이터를 다운로드 받을 수 있다.</p>
<h2 id="video-game-data-dictionary">데이터 사전</h2>
<ul>
<li>Rank - Ranking of overall sales</li>
<li>Name - The games name</li>
<li>Platform - Platform of the games release (i.e. PC,PS4, etc.)</li>
<li>Year - Year of the game`s release</li>
<li>Genre - Genre of the game</li>
<li>Publisher - Publisher of the game</li>
<li>NA_Sales - Sales in North America (in millions)</li>
<li>EU_Sales - Sales in Europe (in millions)</li>
<li>JP_Sales - Sales in Japan (in millions)</li>
<li>Other_Sales - Sales in the rest of the world (in millions)</li>
<li>Global_Sales - Total worldwide sales.</li>
</ul>
<h1 id="video-game-eda">탐색적 데이터 분석</h1>
<h2 id="video-game-eda-import">데이터 가져오기</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a><span class="kw">library</span>(janitor)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a>vg_dat &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/Video_Games_Sales_as_at_22_Dec_2016.csv&quot;</span>,</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a>                   <span class="dt">col_types =</span> <span class="kw">cols</span>(</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true"></a>                                    <span class="dt">Name =</span> <span class="kw">col_character</span>(),</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true"></a>                                    <span class="dt">Platform =</span> <span class="kw">col_character</span>(),</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true"></a>                                    <span class="dt">Year_of_Release =</span> <span class="kw">col_character</span>(),</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true"></a>                                    <span class="dt">Genre =</span> <span class="kw">col_character</span>(),</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true"></a>                                    <span class="dt">Publisher =</span> <span class="kw">col_character</span>(),</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true"></a>                                    <span class="dt">NA_Sales =</span> <span class="kw">col_double</span>(),</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true"></a>                                    <span class="dt">EU_Sales =</span> <span class="kw">col_double</span>(),</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true"></a>                                    <span class="dt">JP_Sales =</span> <span class="kw">col_double</span>(),</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true"></a>                                    <span class="dt">Other_Sales =</span> <span class="kw">col_double</span>(),</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true"></a>                                    <span class="dt">Global_Sales =</span> <span class="kw">col_double</span>(),</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true"></a>                                    <span class="dt">Critic_Score =</span> <span class="kw">col_double</span>(),</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true"></a>                                    <span class="dt">Critic_Count =</span> <span class="kw">col_double</span>(),</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true"></a>                                    <span class="dt">User_Score =</span> <span class="kw">col_double</span>(),</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true"></a>                                    <span class="dt">User_Count =</span> <span class="kw">col_double</span>(),</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true"></a>                                    <span class="dt">Developer =</span> <span class="kw">col_character</span>(),</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true"></a>                                    <span class="dt">Rating =</span> <span class="kw">col_character</span>())) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true"></a><span class="st">  </span>clean_names</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true"></a>vg_df &lt;-<span class="st"> </span>vg_dat <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(genre)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="st"> </span>year_of_release <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;2020&quot;</span>, <span class="st">&quot;2017&quot;</span>))</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true"></a></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true"></a>vg_df <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true"></a><span class="st">  </span><span class="kw">sample_n</span>(<span class="dv">100</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true"></a><span class="st">  </span>DT<span class="op">::</span><span class="kw">datatable</span>()</span></code></pre></div>
<p><img src="figure/data-import-1.png" title="plot of chunk data-import" alt="plot of chunk data-import" style="display: block; margin: auto;" /></p>
<h1 id="video-game-eda-market">시장(market)</h1>
<h2 id="video-game-eda-release">발매년도로 본 시장 성장</h2>
<p>발매년도를 통해서 년도별 시장 성장을 파악한다.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="kw">library</span>(extrafont)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a><span class="kw">loadfonts</span>()</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true"></a>vg_df <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true"></a><span class="st">  </span><span class="kw">group_by</span>(year_of_release ) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="st">`</span><span class="dt">세계시장규모</span><span class="st">`</span> =<span class="st"> </span><span class="kw">sum</span>(global_sales)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">year_of_release =</span> lubridate<span class="op">::</span><span class="kw">ymd</span>(<span class="kw">paste0</span>(year_of_release, <span class="st">&quot;-01-01&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>year_of_release, <span class="dt">y=</span><span class="st">`</span><span class="dt">세계시장규모</span><span class="st">`</span>, <span class="dt">group=</span><span class="dv">1</span>)) <span class="op">+</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true"></a><span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true"></a><span class="st">    </span><span class="kw">geom_line</span>() <span class="op">+</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true"></a><span class="st">    </span><span class="kw">scale_x_date</span>(<span class="dt">date_labels =</span> <span class="st">&quot;%y&quot;</span>, <span class="dt">breaks =</span> <span class="st">&quot;5 years&quot;</span>) <span class="op">+</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme_light</span>(<span class="dt">base_family =</span> <span class="st">&quot;NanumGothic&quot;</span>) <span class="op">+</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;출시연도&quot;</span>, <span class="dt">y=</span><span class="st">&quot;세계시장규모(백만$)&quot;</span>, <span class="dt">title=</span><span class="st">&quot;비디오 게임 세계시장규모&quot;</span>, </span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true"></a>         <span class="dt">subtitle=</span><span class="st">&quot;게임 타이틀을 바탕으로 세계시장규모 추정&quot;</span>)</span></code></pre></div>
<p><img src="figure/data-release-year-1.png" title="plot of chunk data-release-year" alt="plot of chunk data-release-year" style="display: block; margin: auto;" /></p>
<p>비디오 게임 시장별(북미, 유럽, 일본, 기타)로 나눠진 매출을 살펴보자.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="kw">library</span>(extrafont)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a><span class="kw">loadfonts</span>()</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a><span class="kw">library</span>(gganimate)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true"></a>vg_df <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(year_of_release, na_sales, eu_sales, jp_sales, other_sales) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true"></a><span class="st">  </span><span class="kw">gather</span>(mkt_segment, sales, <span class="op">-</span>year_of_release) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true"></a><span class="st">  </span><span class="kw">group_by</span>(year_of_release, mkt_segment) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="st">`</span><span class="dt">세계시장규모</span><span class="st">`</span> =<span class="st"> </span><span class="kw">sum</span>(sales)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true"></a><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">year_of_release =</span> lubridate<span class="op">::</span><span class="kw">ymd</span>(<span class="kw">paste0</span>(year_of_release, <span class="st">&quot;-01-01&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>year_of_release, <span class="dt">y=</span><span class="st">`</span><span class="dt">세계시장규모</span><span class="st">`</span>, <span class="dt">color=</span>mkt_segment)) <span class="op">+</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true"></a><span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true"></a><span class="st">    </span><span class="kw">geom_line</span>() <span class="op">+</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true"></a><span class="st">    </span><span class="kw">scale_x_date</span>(<span class="dt">date_labels =</span> <span class="st">&quot;%Y&quot;</span>, <span class="dt">breaks =</span> <span class="st">&quot;5 years&quot;</span>) <span class="op">+</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme_light</span>(<span class="dt">base_family =</span> <span class="st">&quot;NanumGothic&quot;</span>) <span class="op">+</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;&quot;</span>, <span class="dt">y=</span><span class="st">&quot;시장규모(백만$)&quot;</span>, <span class="dt">title=</span><span class="st">&quot;비디오 게임 지역별 시장규모&quot;</span>, </span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true"></a>         <span class="dt">subtitle=</span><span class="st">&quot;게임 타이틀을 바탕으로 시장규모 추정&quot;</span>,</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true"></a>         <span class="dt">color=</span><span class="st">&quot;세분화된 시장&quot;</span>)</span></code></pre></div>
<p><img src="figure/data-release-year-by-segment-1.png" title="plot of chunk data-release-year-by-segment" alt="plot of chunk data-release-year-by-segment" style="display: block; margin: auto;" /></p>
<h2 id="video-game-eda-platform-developer-publisher">플랫폼, 개발사, 퍼블리셔</h2>
<p>플랫폼, 개발사, 퍼블리셔별로 상위 플랫폼 및 업체를 중심으로 살펴본다.</p>
<h3 id="video-game-eda-platform-developer-publisher-p">플랫폼</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a>vg_df <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a><span class="st">  </span><span class="kw">count</span>(platform, <span class="dt">sort=</span><span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code># A tibble: 31 x 2
   platform     n
   &lt;chr&gt;    &lt;int&gt;
 1 PS2       2161
 2 DS        2151
 3 PS3       1331
 4 Wii       1320
 5 X360      1262
 6 PSP       1209
 7 PS        1197
 8 PC         974
 9 XB         824
10 GBA        822
# ... with 21 more rows</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a>vg_df <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">platform_fct =</span> <span class="kw">fct_lump</span>(platform, <span class="dv">11</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">group_by</span>(platform_fct, year_of_release) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="st">`</span><span class="dt">매출</span><span class="st">`</span> =<span class="st"> </span><span class="kw">sum</span>(global_sales)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">year_of_release =</span> lubridate<span class="op">::</span><span class="kw">ymd</span>(<span class="kw">paste0</span>(year_of_release, <span class="st">&quot;-01-01&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>year_of_release, <span class="dt">y=</span><span class="st">`</span><span class="dt">매출</span><span class="st">`</span>, <span class="dt">fill=</span>platform_fct, <span class="dt">color=</span>platform_fct)) <span class="op">+</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true"></a><span class="st">    </span><span class="kw">geom_line</span>(<span class="dt">size=</span><span class="fl">1.5</span>) <span class="op">+</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true"></a><span class="st">    </span><span class="kw">facet_wrap</span>(<span class="op">~</span>platform_fct) <span class="op">+</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true"></a><span class="st">    </span><span class="kw">scale_x_date</span>(<span class="dt">date_labels =</span> <span class="st">&quot;%Y&quot;</span>, <span class="dt">breaks =</span> <span class="st">&quot;5 years&quot;</span>) <span class="op">+</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme_light</span>(<span class="dt">base_family =</span> <span class="st">&quot;NanumGothic&quot;</span>) <span class="op">+</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;&quot;</span>, <span class="dt">y=</span><span class="st">&quot;매출(백만$)&quot;</span>, <span class="dt">title=</span><span class="st">&quot;비디오 게임 플랫폼별 시장규모&quot;</span>, </span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true"></a>         <span class="dt">subtitle=</span><span class="st">&quot;매출 순위 상위 11개 플랫폼 기준&quot;</span>,</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true"></a>         <span class="dt">color=</span><span class="st">&quot;플랫폼&quot;</span>) <span class="op">+</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="figure/video-game-platform-1.png" title="plot of chunk video-game-platform" alt="plot of chunk video-game-platform" style="display: block; margin: auto;" /></p>
<h3 id="video-game-eda-platform-developer-publisher-d">개발사</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true"></a>top_developer_v &lt;-<span class="st"> </span>vg_df <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true"></a><span class="st">  </span><span class="kw">count</span>(developer, <span class="dt">wt=</span>global_sales, <span class="dt">sort=</span><span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(developer)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true"></a><span class="st">  </span><span class="kw">top_n</span>(<span class="dv">11</span>, <span class="dt">wt=</span>n) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true"></a><span class="st">  </span><span class="kw">pull</span>(developer)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true"></a>vg_df <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">developer_fct =</span> <span class="kw">ifelse</span>(developer <span class="op">%in%</span><span class="st"> </span>top_developer_v, developer, <span class="st">&quot;Other&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true"></a><span class="st">  </span><span class="kw">group_by</span>(developer_fct, year_of_release) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="st">`</span><span class="dt">매출</span><span class="st">`</span> =<span class="st"> </span><span class="kw">sum</span>(global_sales)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">year_of_release =</span> lubridate<span class="op">::</span><span class="kw">ymd</span>(<span class="kw">paste0</span>(year_of_release, <span class="st">&quot;-01-01&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>year_of_release, <span class="dt">y=</span><span class="st">`</span><span class="dt">매출</span><span class="st">`</span>, <span class="dt">fill=</span>developer_fct, <span class="dt">color=</span>developer_fct)) <span class="op">+</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true"></a><span class="st">    </span><span class="kw">geom_line</span>(<span class="dt">size=</span><span class="fl">1.5</span>) <span class="op">+</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true"></a><span class="st">    </span><span class="kw">facet_wrap</span>(<span class="op">~</span>developer_fct) <span class="op">+</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true"></a><span class="st">    </span><span class="kw">scale_x_date</span>(<span class="dt">date_labels =</span> <span class="st">&quot;%Y&quot;</span>, <span class="dt">breaks =</span> <span class="st">&quot;5 years&quot;</span>) <span class="op">+</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme_light</span>(<span class="dt">base_family =</span> <span class="st">&quot;NanumGothic&quot;</span>) <span class="op">+</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;&quot;</span>, <span class="dt">y=</span><span class="st">&quot;매출(백만$)&quot;</span>, <span class="dt">title=</span><span class="st">&quot;비디오 게임 개발사(developer) 시장규모&quot;</span>, </span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true"></a>         <span class="dt">subtitle=</span><span class="st">&quot;매출 순위 상위 11개 개발사 기준&quot;</span>,</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true"></a>         <span class="dt">color=</span><span class="st">&quot;개발사&quot;</span>) <span class="op">+</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="figure/video-game-developer-1.png" title="plot of chunk video-game-developer" alt="plot of chunk video-game-developer" style="display: block; margin: auto;" /></p>
<h3 id="video-game-eda-platform-developer-publisher-pub">퍼블리셔</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true"></a>top_publisher_v &lt;-<span class="st"> </span>vg_df <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true"></a><span class="st">  </span><span class="kw">count</span>(publisher, <span class="dt">wt=</span>global_sales, <span class="dt">sort=</span><span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">top_n</span>(<span class="dv">11</span>, <span class="dt">wt=</span>n) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true"></a><span class="st">  </span><span class="kw">pull</span>(publisher)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true"></a>vg_df <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">publisher_fct =</span> <span class="kw">ifelse</span>(publisher <span class="op">%in%</span><span class="st"> </span>top_publisher_v, publisher, <span class="st">&quot;Other&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true"></a><span class="st">  </span><span class="kw">group_by</span>(publisher_fct, year_of_release) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="st">`</span><span class="dt">매출</span><span class="st">`</span> =<span class="st"> </span><span class="kw">sum</span>(global_sales)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">year_of_release =</span> lubridate<span class="op">::</span><span class="kw">ymd</span>(<span class="kw">paste0</span>(year_of_release, <span class="st">&quot;-01-01&quot;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true"></a><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>year_of_release, <span class="dt">y=</span><span class="st">`</span><span class="dt">매출</span><span class="st">`</span>, <span class="dt">group=</span>publisher_fct, <span class="dt">color=</span>publisher_fct)) <span class="op">+</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true"></a><span class="st">    </span><span class="kw">geom_line</span>(<span class="dt">size=</span><span class="fl">1.5</span>) <span class="op">+</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true"></a><span class="st">    </span><span class="kw">facet_wrap</span>(<span class="op">~</span>publisher_fct) <span class="op">+</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true"></a><span class="st">    </span><span class="kw">scale_x_date</span>(<span class="dt">date_labels =</span> <span class="st">&quot;%Y&quot;</span>, <span class="dt">breaks =</span> <span class="st">&quot;5 years&quot;</span>) <span class="op">+</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme_light</span>(<span class="dt">base_family =</span> <span class="st">&quot;NanumGothic&quot;</span>) <span class="op">+</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;&quot;</span>, <span class="dt">y=</span><span class="st">&quot;매출(백만$)&quot;</span>, <span class="dt">title=</span><span class="st">&quot;비디오 게임 개발사(developer) 시장규모&quot;</span>, </span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true"></a>         <span class="dt">subtitle=</span><span class="st">&quot;매출 순위 상위 11개 개발사 기준&quot;</span>,</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true"></a>         <span class="dt">color=</span><span class="st">&quot;개발사&quot;</span>) <span class="op">+</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="figure/video-game-publisher-1.png" title="plot of chunk video-game-publisher" alt="plot of chunk video-game-publisher" style="display: block; margin: auto;" /></p>
<h1 id="video-game-eda-market-model">매출 예측 모형</h1>
<p>게임 타이틀 매출 예측을 위해서 출시년도(<code>year_of_release</code>), 전문가 평점(<code>critic_score</code>), 전문가 참여수(“critic_count”), 유저 평점(“user_score”), 유저 참여수(“user_count”)를 예측변수로 넣어 매출을 예측해보자.</p>
<p><span class="math display">\[\text{게임 타이틀 매출} = f(\text{year_of_release, critic_score, user_score, ...}) + \epsilon\]</span></p>
<p>게임 타이틀 매출에 가장 영향을 많이 주는 영향을 찾아내기 위해 randomForest 알고리즘을 돌려서 <code>user_count</code>, <code>critic_count</code>가 영향을 많이 주는 것으로 나타난다.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true"></a><span class="kw">library</span>(broom)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true"></a><span class="kw">library</span>(randomForest)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true"></a>vg_mod_df &lt;-<span class="st"> </span>vg_df <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(name, global_sales, year_of_release, critic_score, critic_count, user_score, user_count) <span class="op">%&gt;%</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">year_of_release =</span> <span class="kw">as.integer</span>(year_of_release)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">complete.cases</span>(.))</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true"></a>  </span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true"></a>vg_rf &lt;-<span class="st"> </span><span class="kw">randomForest</span>(<span class="kw">log</span>(global_sales) <span class="op">~</span><span class="st"> </span>year_of_release<span class="op">+</span>critic_score<span class="op">+</span>critic_count<span class="op">+</span>user_score<span class="op">+</span>user_count, <span class="dt">data=</span>vg_mod_df)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true"></a><span class="kw">varImpPlot</span>(vg_rf)</span></code></pre></div>
<p><img src="figure/vg-linear-regression-viz-1.png" title="plot of chunk vg-linear-regression-viz" alt="plot of chunk vg-linear-regression-viz" style="display: block; margin: auto;" /></p>
<p>퍼블리셔 별로 차이는 나지만 대체로 사용자 참여수가 높아질수록 매출이 높아지는 경향을 나타내고 있다.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true"></a>vg_df <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">publisher_fct =</span> <span class="kw">ifelse</span>(publisher <span class="op">%in%</span><span class="st"> </span>top_publisher_v, publisher, <span class="st">&quot;Other&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>user_count, <span class="dt">y=</span>global_sales)) <span class="op">+</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true"></a><span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true"></a><span class="st">    </span><span class="kw">scale_x_sqrt</span>() <span class="op">+</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true"></a><span class="st">    </span><span class="kw">scale_y_sqrt</span>() <span class="op">+</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true"></a><span class="st">    </span><span class="kw">geom_smooth</span>() <span class="op">+</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme_light</span>(<span class="dt">base_family =</span> <span class="st">&quot;NanumGothic&quot;</span>) <span class="op">+</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true"></a><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;사용자 참여수&quot;</span>, <span class="dt">y=</span><span class="st">&quot;매출(백만$)&quot;</span>, <span class="dt">title=</span><span class="st">&quot;사용자 참여수와 매출 상관관계&quot;</span>, </span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true"></a>         <span class="dt">subtitle=</span><span class="st">&quot;&quot;</span>,</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true"></a>         <span class="dt">color=</span><span class="st">&quot;개발사&quot;</span>) <span class="op">+</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true"></a><span class="st">    </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>) <span class="op">+</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true"></a><span class="st">    </span><span class="kw">facet_wrap</span>(<span class="op">~</span>publisher_fct)</span></code></pre></div>
<p><img src="figure/vg-linear-regression-1.png" title="plot of chunk vg-linear-regression" alt="plot of chunk vg-linear-regression" style="display: block; margin: auto;" /></p>
        </div>
      </div>
      </article>
      <div class="footer">
        <a class="label swc-blue-bg" href="http://software-carpentry.org">Software Carpentry</a>
        <a class="label swc-blue-bg" href="https://github.com/swcarpentry/lesson-template">Source</a>
        <a class="label swc-blue-bg" href="mailto:admin@software-carpentry.org">Contact</a>
        <a class="label swc-blue-bg" href="LICENSE.html">License</a>
      </div>
    </div>
    <!-- Javascript placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="css/bootstrap/bootstrap-js/bootstrap.js"></script>
    <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
  </body>
</html>
